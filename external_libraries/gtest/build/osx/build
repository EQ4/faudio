#!/bin/bash
# git submodule init external_libraries/gtest/source;
# git submodule update external_libraries/gtest/source;

pushd external_libraries/gtest/source;

mkdir -p build \
    && pushd build \
    && cmake .. \
        -DCMAKE_OSX_ARCHITECTURES="i386;x86_64" \
    && make \
    && popd \
    && mkdir -p             ../result/include \
    && mkdir -p             ../result/lib \
    && mv build/libgtest.a  ../result/lib \
    && cp -R include/       ../result/include;
echo "Gtest result: $?";
popd;

