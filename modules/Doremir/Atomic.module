
/** 
    @addtogroup Doremir
    @addtogroup Atomic
    
    Cross-platform atomic variables. Submodules contains lock-free data structures.

 */
module Doremir.Atomic
{
    import Doremir.Std;
    import "C" Doremir.Bool;
    
    type Atomic = opaque;
    type Updater = (Intptr -> Intptr)*;

    create  : () -> Atomic;
    copy    : Atomic -> Atomic;
    swap    : (Atomic, Atomic) -> Void;
    destroy : Atomic -> Void;

    exchange : (Atomic, Intptr) -> Bool;
    add     : (Atomic, Intptr) -> Void;
    get     : Atomic -> Intptr;
    modify  : (Atomic, Updater) -> Void;
    set     : (Atomic, Intptr) -> Void;
}

