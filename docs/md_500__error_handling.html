<!-- HTML header for doxygen 1.8.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>DoReMIR Audio Engine: Error handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="styles.css" rel="stylesheet" type="text/css" />
<!-- <link href="doxygen.css" rel="stylesheet" type="text/css" /> -->
<!--  -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DoReMIR Audio Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_500__error_handling.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Error handling </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ErrorProg">Client errors</a></li>
<li class="level1"><a href="#FatalRecov">Irrecoverable errors</a></li>
<li class="level1"><a href="#ErrorRec">Recoverable errors</a><ul><li class="level2"><a href="#ErrorOpt">Optional values</a></li>
<li class="level2"><a href="#ErrorVal">Error values</a><ul><li class="level3"><a href="#ErrorCallback">Errors and callbacks</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#Logging">Logging</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="Errors"></a></p>
<p>Error handling in the Audio Engine comes in three varieties:</p>
<ul>
<li>Client errors</li>
<li>Irrecoverable errors</li>
<li>Recoverable errors</li>
</ul>
<h1><a class="anchor" id="ErrorProg"></a>
Client errors</h1>
<p>Client errors are those that are caused directly by the client programmer, often by using a library function in the wrong way. Preferably all such errors should be encoded in the type system and caught at compile time, but unfortunately this is not always practical.</p>
<p>Some examples of client errors are:</p>
<ul>
<li>Calling <a class="el" href="group___doremir_midi.html#ga4b7934d90df97e69620348e1fba20170">sysexData</a> on a simple midi message.<ul>
<li><em>Correct usage:</em> call <a class="el" href="group___doremir_midi.html#ga4d4004140360ff1191899f915699f503">isSysex</a> to assure the midi message is actually a system exclusive message.</li>
</ul>
</li>
</ul>
<ul>
<li>Calling <a class="el" href="group___doremir_buffer.html#ga879ff4c527e90ba6736becb1be7c41c8">peek</a> with an index outside the buffer range.<ul>
<li><em>Correct usage:</em> call <a class="el" href="group___doremir_buffer.html#gaed3721e1a9c9dffa1bc9ab63feeb39ac">size</a> to determine the size of the buffer.</li>
</ul>
</li>
</ul>
<ul>
<li>Passing a value missing a required interface to a generic function or collection.<ul>
<li><em>Correct usage:</em> Use a <a class="el" href="md_600__interfaces.html#DynInterfaceCheck">dynamic check</a>, an existential type or some other technique to assure that the value implement all required interfaces.</li>
</ul>
</li>
</ul>
<ul>
<li>Calling <a class="el" href="group___doremir.html#ga485cd4aab83f3fdd22b67a27b6d6d22e">destroy</a> on a value more than once, or passing it to a destructive function more than once.<ul>
<li><em>Correct usage:</em> Destroy the value exactly once.</li>
</ul>
</li>
</ul>
<p>Client errors will terminate the process without logging or warning. However, if the library is built in debug mode, an file number and message is usually printed.</p>
<p>Note that while client errors are ubiquitous in a C library, they can often be avoided when using another language. For example Lisp bindings could be written to always perform dynamic interface checks, always call destroy from a finalizer and so on.</p>
<h1><a class="anchor" id="FatalRecov"></a>
Irrecoverable errors</h1>
<p>Irrecoverable errors are those that occur outside the control of the both client programmer and the Audio Engine. Like client errors, they will terminate the process, but will usually provide a log message explaining the problem.</p>
<h1><a class="anchor" id="ErrorRec"></a>
Recoverable errors</h1>
<p>Recoverable errors are those that occur outside the control of the client, but in control of the Audio Engine.</p>
<p>Generally such errors can be handled by the client by some special mechanism in the library interface such as exceptions or status codes. In the Audio Engine, recoverable errors always occur when a function is called, and must be detected by the client by inspecting the return value of the function. They are grouped into <em>optional</em> values and <em>error</em> values.</p>
<h2><a class="anchor" id="ErrorOpt"></a>
Optional values</h2>
<p>Optional values simply means that a function returns <code>null</code> instead of an ordinary value<sup><a class="el" href="md_500__error_handling.html#ErrorsNote1">1</a></sup>. They are used for simple cases where no additional information about the condition is needed.</p>
<p>Examples of functions returning optional values are <a class="el" href="group___doremir_list.html#ga2717f80d202d6c308bdc0d6f4e3ef611">Doremir.List.index</a> and <a class="el" href="group___doremir_priority_queue.html#ga92ea0d3db67f5af2ee7a01efaaf1c4ab">Doremir.PriorityQueue.peek</a>.</p>
<h2><a class="anchor" id="ErrorVal"></a>
Error values</h2>
<p>Error values are used in cases where the system has access to information about the error. Error values depend on the interface mechanism: any value can be passed to <a class="el" href="group___doremir.html#gad7bcf951867c2b822ccb60e657a3b820">check</a>, which returns true if and only the value is an error.</p>
<p>Functions returning errors must have their return value passed to <em>check</em> before the value is used by another function. If an error has occurred, check will return true and the other methods of the <a class="el" href="structdoremir__error__t.html">Error</a> interface (<a class="el" href="group___doremir_error.html#gaf312f83e48495e8269ded8d4dca07332">severity</a>, <a class="el" href="group___doremir_error.html#gac33ac7e2f34d8f2b259698af879fc6df">message</a> and <a class="el" href="group___doremir_error.html#gafd961eb4b77347b8ebc35d0daf593e94">orgin</a>) can be used to obtain more information about the condition, otherwise the value can be used normally. Note that values returned from construction and copy functions must be destroyed whether an error has occured or not.</p>
<h3><a class="anchor" id="ErrorCallback"></a>
Errors and callbacks</h3>
<p>TODO</p>
<h1><a class="anchor" id="Logging"></a>
Logging</h1>
<p>The Audio Engine provides a simple global logging system. All error values (not optional values) will be passed to a global log function before they are returned to the client. By default, this function does nothing. The <a class="el" href="group___doremir_audio_engine.html">AudioEngine</a> module provides a function to replace this function, and some default implementations that writes to the standard output, or to a specific log file.</p>
<p>The client can add messages to the log by calling <a class="el" href="group___doremir_error.html#ga20cf6b36081cd1b91b742998722373d2">log</a>, logInfo, or some of its sibling functions. </p>
<hr/>
<p><a class="anchor" id="ErrorsNote1"></a></p>
<ol type="1">
<li>There are no functions returning <code>null</code> for any other purpose in the Audio Engine. This implies that null can never be used in other contexts: in particular it can not be passed to a queue or stored in a collection. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Jan 26 2013 03:39:03 for DoReMIR Audio Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
